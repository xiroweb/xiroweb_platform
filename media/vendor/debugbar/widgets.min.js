if(typeof PhpDebugBar>"u"){var PhpDebugBar={};PhpDebugBar.$=jQuery}(function(e){PhpDebugBar.Widgets={};var i=PhpDebugBar.utils.makecsscls("phpdebugbar-widgets-"),x=PhpDebugBar.Widgets.htmlize=function(t){return t.replace(/\n/g,"<br>").replace(/\s/g,"&nbsp;")},_=PhpDebugBar.Widgets.renderValue=function(t,s){return typeof t!="string"?s?x(JSON.stringify(t,void 0,2)):JSON.stringify(t):t},W=PhpDebugBar.Widgets.highlight=function(t,s){return typeof t=="string"?typeof hljs>"u"?x(t):s?hljs.highlight(t,{language:s}).value:hljs.highlightAuto(t).value:(typeof hljs=="object"&&t.each(function(a,n){hljs.highlightElement(n)}),t)},v=PhpDebugBar.Widgets.createCodeBlock=function(t,s,a,n){var l=e("<pre />").addClass(i("code-block")),d=e("<code />").text(t+`
`).appendTo(l);if(s&&d.addClass("language-"+s),W(d).removeClass("hljs"),!isNaN(parseFloat(a))){var r=t.split(`
`).length,h=e("<ul />").prependTo(l);l.children().addClass(i("numbered-code"));for(var p=a;p<a+r;p++){var c=e("<li />").text(p).appendTo(h);n===p&&c.addClass(i("highlighted-line")).append("<span>&nbsp;</span>")}}return l},y=PhpDebugBar.utils.getDictValue=function(t,s,a){for(var n=t,l=s.split("."),d=0;d<l.length;d++){if(!n[l[d]])return a;n=n[l[d]]}return n},C=PhpDebugBar.Widgets.ListWidget=PhpDebugBar.Widget.extend({tagName:"ul",className:i("list"),initialize:function(t){t.itemRenderer||(t.itemRenderer=this.itemRenderer),this.set(t)},render:function(){this.bindAttr(["itemRenderer","data"],function(){if(this.$el.empty(),!!this.has("data"))for(var t=this.get("data"),s=0;s<t.length;s++){var a=e("<li />").addClass(i("list-item")).appendTo(this.$el);this.get("itemRenderer")(a,t[s])}})},itemRenderer:function(t,s){t.html(_(s))}}),T=PhpDebugBar.Widgets.KVListWidget=C.extend({tagName:"dl",className:i("kvlist"),render:function(){this.bindAttr(["itemRenderer","data"],function(){if(this.$el.empty(),!!this.has("data")){var t=this;e.each(this.get("data"),function(s,a){var n=e("<dt />").addClass(i("key")).appendTo(t.$el),l=e("<dd />").addClass(i("value")).appendTo(t.$el);t.get("itemRenderer")(n,l,s,a)})}})},itemRenderer:function(t,s,a,n){t.text(a),s.html(x(n))}}),j=PhpDebugBar.Widgets.VariableListWidget=T.extend({className:i("kvlist varlist"),itemRenderer:function(t,s,a,n){e("<span />").attr("title",a).text(a).appendTo(t);var l=n&&n.value||n;l&&l.length>100&&(l=l.substr(0,100)+"...");var d=null;s.text(l).click(function(){s.hasClass(i("pretty"))?s.text(l).removeClass(i("pretty")):(d=d||v(n),s.addClass(i("pretty")).empty().append(d))})}}),S=PhpDebugBar.Widgets.HtmlVariableListWidget=T.extend({className:i("kvlist htmlvarlist"),itemRenderer:function(t,s,a,n){if(e("<span />").attr("title",e("<i />").html(a||"").text()).html(a||"").appendTo(t),s.html(n&&n.value||n),n&&n.xdebug_link){var l=e("<span />").addClass(i("filename")).text(n.xdebug_link.filename+(n.xdebug_link.line?"#"+n.xdebug_link.line:""));n.xdebug_link&&(n.xdebug_link.ajax?e('<a title="'+n.xdebug_link.url+'"></a>').on("click",function(){e.ajax(n.xdebug_link.url)}).addClass(i("editor-link")).appendTo(l):e('<a href="'+n.xdebug_link.url+'"></a>').addClass(i("editor-link")).appendTo(l)),l.appendTo(s)}}}),A=PhpDebugBar.Widgets.IFrameWidget=PhpDebugBar.Widget.extend({tagName:"iframe",className:i("iframe"),render:function(){this.$el.attr({seamless:"seamless",border:"0",width:"100%",height:"100%"}),this.bindAttr("data",function(t){this.$el.attr("src",t)})}}),E=PhpDebugBar.Widgets.MessagesWidget=PhpDebugBar.Widget.extend({className:i("messages"),render:function(){var t=this;this.$list=new C({itemRenderer:function(s,a){if(a.message_html)var n=e("<span />").addClass(i("value")).html(a.message_html).appendTo(s);else{var l=a.message;l.length>100&&(l=l.substr(0,100)+"...");var n=e("<span />").addClass(i("value")).text(l).appendTo(s);if(!a.is_string||a.message.length>100){var d=a.message;a.is_string||(d=null),s.css("cursor","pointer").click(function(){if(window.getSelection().type=="Range")return"";n.hasClass(i("pretty"))?n.text(l).removeClass(i("pretty")):(d=d||v(a.message,"php"),n.addClass(i("pretty")).empty().append(d))})}}if(a.xdebug_link){var r=e("<span />").addClass(i("filename")).text(a.xdebug_link.filename+(a.xdebug_link.line?"#"+a.xdebug_link.line:""));a.xdebug_link&&(a.xdebug_link.ajax?e('<a title="'+a.xdebug_link.url+'"></a>').on("click",function(){e.ajax(a.xdebug_link.url)}).addClass(i("editor-link")).appendTo(r):e('<a href="'+a.xdebug_link.url+'"></a>').addClass(i("editor-link")).appendTo(r)),r.appendTo(s)}a.collector&&e("<span />").addClass(i("collector")).text(a.collector).prependTo(s),a.label&&(n.addClass(i(a.label)),e("<span />").addClass(i("label")).text(a.label).prependTo(s))}}),this.$list.$el.appendTo(this.$el),this.$toolbar=e('<div><i class="phpdebugbar-fa phpdebugbar-fa-search"></i></div>').addClass(i("toolbar")).appendTo(this.$el),e('<input type="text" name="search" aria-label="Search" placeholder="Search" />').on("change",function(){t.set("search",this.value)}).appendTo(this.$toolbar),this.bindAttr("data",function(s){this.set({excludelabel:[],excludecollector:[],search:""}),this.$toolbar.find(i(".filter")).remove();var a=[],n=[],l=this,d=function(r,h){e("<a />").addClass(i("filter")).addClass(i(r)).text(h).attr("rel",h).on("click",function(){l.onFilterClick(this,r)}).appendTo(l.$toolbar)};s.forEach(function(r){a.includes(r.label||"none")||a.push(r.label||"none"),n.includes(r.collector||"none")||n.push(r.collector||"none")}),a.length>1&&a.forEach(r=>d("label",r)),n.length!==1&&(e("<a />").addClass(i("filter")).css("visibility","hidden").appendTo(l.$toolbar),n.forEach(r=>d("collector",r)))}),this.bindAttr(["excludelabel","excludecollector","search"],function(){var s=this.get("excludelabel")||[],a=this.get("excludecollector")||[],n=this.get("search"),l=!1,d=[];n&&n===n.toLowerCase()&&(l=!0),this.get("data").forEach(function(r){var h=l?r.message.toLowerCase():r.message;!s.includes(r.label||void 0)&&!a.includes(r.collector||void 0)&&(!n||h.indexOf(n)>-1)&&d.push(r)}),this.$list.set("data",d)})},onFilterClick:function(t,s){e(t).toggleClass(i("excluded"));var a=[];this.$toolbar.find(i(".filter")+i(".excluded")+i("."+s)).each(function(){a.push(this.rel==="none"||!this.rel?void 0:this.rel)}),this.set("exclude"+s,a)}}),F=PhpDebugBar.Widgets.TimelineWidget=PhpDebugBar.Widget.extend({tagName:"ul",className:i("timeline"),render:function(){this.bindAttr("data",function(t){var s=function(o){return o<.001?(o*1e6).toFixed()+"\u03BCs":o<.1?(o*1e3).toFixed(2)+"ms":o<1?(o*1e3).toFixed()+"ms":o.toFixed(2)+"s"},a=function(b){if(b===0||b===null)return"0B";var w=b<0?"-":"",b=Math.abs(b),k=Math.log(b)/Math.log(1024),R=["B","KB","MB","GB","TB"];return w+Math.round(Math.pow(1024,k-Math.floor(k))*100)/100+R[Math.floor(k)]};if(this.$el.empty(),t.measures){for(var n={},l=0;l<t.measures.length;l++){var d=t.measures[l];n[d.label]||(n[d.label]={count:0,duration:0,memory:0}),n[d.label].count+=1,n[d.label].duration+=d.duration,n[d.label].memory+=d.memory||0;var r=e("<div />").addClass(i("measure")),h=e("<li />"),p=(d.relative_start*100/t.duration).toFixed(2),c=Math.min((d.duration*100/t.duration).toFixed(2),100-p);if(r.append(e("<span />").addClass(i("value")).css({left:p+"%",width:c+"%"})),r.append(e("<span />").addClass(i("label")).text(d.label+" ("+d.duration_str+(d.memory?"/"+d.memory_str:"")+")")),d.collector&&e("<span />").addClass(i("collector")).text(d.collector).appendTo(r),r.appendTo(h),this.$el.append(h),d.params&&!e.isEmptyObject(d.params)){var g=e('<table><tr><th colspan="2">Params</th></tr></table>').hide().addClass(i("params")).appendTo(h);for(var m in d.params)typeof d.params[m]!="function"&&g.append('<tr><td class="'+i("name")+'">'+m+'</td><td class="'+i("value")+'"><pre><code>'+d.params[m]+"</code></pre></td></tr>");h.css("cursor","pointer").click(function(){if(window.getSelection().type=="Range")return"";var o=e(this).find("table");o.is(":visible")?o.hide():o.show()})}}n=e.map(n,function(o,f){return{label:f,data:o}}).sort(function(o,f){return f.data.duration-o.data.duration});var u=e("<table></table>").addClass(i("params"));e.each(n,function(o,f){c=Math.min((f.data.duration*100/t.duration).toFixed(2),100),u.append('<tr><td class="'+i("name")+'">'+f.data.count+" x "+e("<i />").text(f.label).html()+" ("+c+'%)</td><td class="'+i("value")+'"><div class="'+i("measure")+'"><span class="'+i("value")+'"></span><span class="'+i("label")+'">'+s(f.data.duration)+(f.data.memory?"/"+a(f.data.memory):"")+"</span></div></td></tr>"),u.find("span."+i("value")+":last").css({width:c+"%"})}),this.$el.append("<li/>").find("li:last").append(u)}})}}),M=PhpDebugBar.Widgets.ExceptionsWidget=PhpDebugBar.Widget.extend({className:i("exceptions"),render:function(){this.$list=new C({itemRenderer:function(t,s){if(e("<span />").addClass(i("message")).text(s.message).appendTo(t),s.file){var a=e("<span />").addClass(i("filename")).text(s.file+"#"+s.line);s.xdebug_link&&(s.xdebug_link.ajax?e('<a title="'+s.xdebug_link.url+'"></a>').on("click",function(){fetch(s.xdebug_link.url)}).addClass(i("editor-link")).appendTo(a):e('<a href="'+s.xdebug_link.url+'"></a>').addClass(i("editor-link")).appendTo(a)),a.appendTo(t)}if(s.type&&e("<span />").addClass(i("type")).text(s.type).appendTo(t),s.surrounding_lines){var n=s.line-3<=0?1:s.line-3,l=v(s.surrounding_lines.join(""),"php",n,s.line).addClass(i("file")).appendTo(t);s.stack_trace_html||t.click(function(){l.is(":visible")?l.hide():l.show()})}if(s.stack_trace_html){var d=e("<span />").addClass(i("filename")).html(s.stack_trace_html);d.appendTo(t)}else s.stack_trace&&s.stack_trace.split(`
`).forEach(function(r){var h=e("<div />");e("<span />").addClass(i("filename")).text(r).appendTo(h),h.appendTo(t)})}}),this.$list.$el.appendTo(this.$el),this.bindAttr("data",function(t){this.$list.set("data",t),t.length==1&&this.$list.$el.children().first().find(i(".file")).show()})}}),N=PhpDebugBar.Widgets.DatasetWidget=PhpDebugBar.Widget.extend({initialize:function(t){t.itemRenderer||(t.itemRenderer=this.itemRenderer),this.set(t),this.set("autoshow",null),this.set("id",null),this.set("sort",localStorage.getItem("debugbar-history-sort")||"asc"),this.$el.addClass(i("dataset-history")),this.renderHead()},renderHead:function(){this.$el.empty(),this.$actions=e("<div />").addClass(i("dataset-actions")).appendTo(this.$el);var t=this;this.$autoshow=e("<input type=checkbox>").on("click",function(){t.get("debugbar").ajaxHandler&&t.get("debugbar").ajaxHandler.setAutoShow(e(this).is(":checked"))}),e("<label>Autoshow</label>").append(this.$autoshow).appendTo(this.$actions),this.$clearbtn=e("<a>Clear</a>").appendTo(this.$actions).on("click",function(){t.$table.empty()}),this.$showBtn=e("<a>Show all</a>").appendTo(this.$actions).on("click",function(){t.searchInput.val(null),t.methodInput.val(null),t.set("search",null),t.set("method",null)}),this.methodInput=e('<select name="method" style="width:100px"><option>(method)</option><option>GET</option><option>POST</option><option>PUT</option><option>DELETE</option></select>').on("change",function(){t.set("method",this.value)}).appendTo(this.$actions),this.searchInput=e('<input type="text" name="search" aria-label="Search" placeholder="Search" />').on("input",function(){t.set("search",this.value)}).appendTo(this.$actions),this.$table=e("<tbody />"),e("<table/>").append(e("<thead/>").append(e("<tr/>").append(e("<th></th>").css("width","30px")).append(e("<th>Date \u2195</th>").css("width","175px").click(function(){t.set("sort",t.get("sort")==="asc"?"desc":"asc"),localStorage.setItem("debugbar-history-sort",t.get("sort"))})).append(e("<th>Method</th>").css("width","80px")).append(e("<th>URL</th>")).append(e('<th width="40%">Data</th>')))).append(this.$table).appendTo(this.$el)},renderDatasets:function(){this.$table.empty();var t=this;e.each(this.get("data"),function(s,a){a.__meta&&t.get("itemRenderer")(t,a)})},render:function(){this.bindAttr("data",function(){if(this.get("autoshow")===null&&this.get("debugbar").ajaxHandler&&this.set("autoshow",this.get("debugbar").ajaxHandler.autoShow),!!this.has("data")){var t=this.get("data"),s=t[Object.keys(t)[Object.keys(t).length-1]];s.__meta&&this.get("itemRenderer")(this,s)}}),this.bindAttr(["itemRenderer","search","method","sort"],function(){this.renderDatasets()}),this.bindAttr("autoshow",function(){var t=this.get("autoshow");this.$autoshow.prop("checked",t)}),this.bindAttr("id",function(){var t=this.get("id");this.$table.find("."+i("active")).removeClass(i("active")),this.$table.find("tr[data-id="+t+"]").addClass(i("active"))})},itemRenderer:function(t,s){var a=s.__meta,n=e("<td />"),l=e("<tr />");t.get("sort")==="asc"?l.appendTo(t.$table):l.prependTo(t.$table);var d=function(){var c=t.get("debugbar");c.showDataSet(a.id,c.datesetTitleFormater.format("",s,a.suffix,a.nb)),t.$table.find("."+i("active")).removeClass(i("active")),l.addClass(i("active")),e(this).data("tab")&&c.showTab(e(this).data("tab"))};l.attr("data-id",a.id).append(e("<td>#"+a.nb+"</td>").click(d)).append(e("<td>"+a.datetime+"</td>").click(d)).append(e("<td>"+a.method+"</td>").click(d)).append(e("<td />").append(a.uri+(a.suffix?" "+a.suffix:"")).click(d)).css("cursor","pointer").addClass(i("table-row"));var r=t.get("debugbar");e.each(r.dataMap,function(c,g){var m=y(s,g[0],g[1]);if(c.indexOf(":")!=-1&&(c=c.split(":"),c[1]==="badge"&&m>0)){var u=r.getControl(c[0]),o=e("<a>").attr("title",u.get("title")).data("tab",c[0]);u.$icon&&o.append(r.getControl(c[0]).$icon.clone()),u.$badge&&o.append(r.getControl(c[0]).$badge.clone().css("display","inline-block").text(m)),o.appendTo(n).click(d)}}),l.append(n),r.activeDatasetId===a.id&&l.addClass(i("active"));var h=t.get("search"),p=t.get("method");(h&&a.uri.indexOf(h)==-1||p&&a.method!==p)&&l.hide()}})})(PhpDebugBar.$);
